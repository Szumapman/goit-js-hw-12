{"version":3,"file":"image-search.js","sources":["../src/img/toast-error.svg","../src/img/toast-info-bell.svg","../src/js/get-pixabay-pictures.js","../src/js/create-pixabay-gallery.js","../src/js/image-search.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='22'%20height='24'%20viewBox='0%200%2022%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%2024.0001C11.7956%2024.0001%2012.5587%2023.684%2013.1213%2023.1214C13.6839%2022.5588%2014%2021.7957%2014%2021.0001H8C8%2021.7957%208.31607%2022.5588%208.87868%2023.1214C9.44129%2023.684%2010.2044%2024.0001%2011%2024.0001ZM11%202.87709L9.8045%203.11859C8.44844%203.39489%207.2295%204.13125%206.35398%205.20302C5.47846%206.2748%205.00015%207.61617%205%209.00009C5%209.94209%204.799%2012.2956%204.3115%2014.6131C4.0715%2015.7636%203.7475%2016.9621%203.317%2018.0001H18.683C18.2525%2016.9621%2017.93%2015.7651%2017.6885%2014.6131C17.201%2012.2956%2017%209.94209%2017%209.00009C16.9995%207.61643%2016.521%206.27541%2015.6455%205.20394C14.7701%204.13247%2013.5513%203.39634%2012.1955%203.12009L11%202.87709ZM20.33%2018.0001C20.6645%2018.6706%2021.0515%2019.2016%2021.5%2019.5001H0.5C0.9485%2019.2016%201.3355%2018.6706%201.67%2018.0001C3.02%2015.3001%203.5%2010.3201%203.5%209.00009C3.5%205.37009%206.08%202.34009%209.5075%201.64859C9.48656%201.44002%209.50958%201.22938%209.57505%201.03025C9.64052%200.831122%209.74701%200.647926%209.88763%200.492479C10.0283%200.337031%2010.1999%200.212784%2010.3915%200.127749C10.5831%200.0427135%2010.7904%20-0.0012207%2011%20-0.0012207C11.2096%20-0.0012207%2011.4169%200.0427135%2011.6085%200.127749C11.8001%200.212784%2011.9717%200.337031%2012.1124%200.492479C12.253%200.647926%2012.3595%200.831122%2012.4249%201.03025C12.4904%201.22938%2012.5134%201.44002%2012.4925%201.64859C14.1879%201.99344%2015.7121%202.91363%2016.8069%204.25334C17.9016%205.59305%2018.4998%207.26995%2018.5%209.00009C18.5%2010.3201%2018.98%2015.3001%2020.33%2018.0001Z'%20fill='white'/%3e%3c/svg%3e\"","\"use strict\"\n\nimport axios from \"axios\";\n\nconst pixabayApiKey = \"47865988-0e202f3c070f6317e288e8f49\"; // should be f.e. in .env file\n\nexport async function getPictures(searchTerm, page = 1, perPage = 40) {\n    axios.defaults.baseURL = \"https://pixabay.com/api\";\n    try {\n        const response = await axios.get(\"/\", {\n            params: {\n                key: pixabayApiKey,\n                q: searchTerm,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: perPage,\n                page: page,\n            }\n        });\n        return response.data;\n    } catch (error) {\n        console.log(\"Error during getting images from Pixabay: \", error);\n    }\n}","const createGalleryItem = ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n    const galleryItem = document.createElement(\"li\");\n    galleryItem.classList.add(\"gallery-item\");\n    galleryItem.innerHTML = `\n    <a href=\"${largeImageURL}\" class=\"gallery-item-link\">\n        <img class=\"gallery-item-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n    </a>\n    <ul class=\"info\">\n        <li>\n            <p class=\"info-item-title\">Likes</p>\n            <p class=\"info-item-stats\">${likes}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Views</p>\n            <p class=\"info-item-stats\">${views}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Comments</p>\n            <p class=\"info-item-stats\">${comments}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Downloads</p>\n            <p class=\"info-item-stats\">${downloads}</p>\n        </li>            \n    </ul>\n    `;\n    return galleryItem;\n};\n\nexport const createGallery = (images) => {\n    const imgs = images.map(createGalleryItem);\n\n    const fragment = document.createDocumentFragment();\n    fragment.append(...imgs);\n    return fragment;\n};","\"use strict\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport toastErrorIcon from \"../img/toast-error.svg\";\nimport toastInfoIcon from \"../img/toast-info-bell.svg\";\n\n// to use a different image source, just create new functions getPictures and createGallery and change these two imports\nimport { getPictures } from \"./get-pixabay-pictures\"; \nimport { createGallery } from \"./create-pixabay-gallery\";\n\nconst form = document.querySelector(\".image-search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader-container\");\nconst loadMoreButton = document.querySelector(\".load-more-btn\");\nconst modalLightbox = new SimpleLightbox(\".gallery-item-link\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,  \n});\n\nlet searchTerm = null;\nlet page = 1;\nlet imagesPerPage = 40;\n\nfunction noMatchingResults() {\n    iziToast.show({\n        iconUrl: toastErrorIcon,\n        message: \"Sorry, there are no images matching<br>your search query. Please try again!\",\n        position: \"topRight\",\n        backgroundColor: \"#EF4040\",\n        messageColor: \"white\",\n        progressBarColor: \"#B51B1B\",\n        theme: \"dark\",\n    });\n    loader.classList.add(\"hidden\");\n}\n\nfunction endSearchResults() {\n    iziToast.show({\n        iconUrl: toastInfoIcon,\n        message: \"We're sorry, but you've reached<br>the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"#0099FF\",\n        messageColor: \"white\",\n        progressBarColor: \"#0071BD\",\n        theme: \"dark\",\n    });\n    loadMoreButton.classList.add(\"hidden\");\n}\n\nasync function loadImages() {\n    try {\n        const response = await getPictures(searchTerm, page, imagesPerPage);\n        if (response.totalHits === 0) {\n            noMatchingResults();\n        } else {\n            gallery.appendChild(createGallery(response.hits));\n            if (response.totalHits > imagesPerPage) {\n                loadMoreButton.classList.remove(\"hidden\");\n            } else {\n                endSearchResults();\n            }\n            modalLightbox.refresh();\n            gallery.classList.remove(\"hidden\");\n            loader.classList.add(\"hidden\");\n        }\n    } catch (error) {\n        console.log(\"Error:\", error)\n    }\n}\n\nfunction prepareElements() {\n    loader.classList.remove(\"hidden\");\n    gallery.classList.add(\"hidden\");\n    loadMoreButton.classList.add(\"hidden\");\n    page = 1;\n    gallery.innerHTML = \"\";\n    const toast = document.querySelector('.iziToast');\n    if (toast) {\n        iziToast.hide({\n            transitionOut: 'fadeOutUp'\n        }, toast);\n    }\n}\n\nform.addEventListener(\"submit\", async (evt) => {\n    evt.preventDefault();\n    prepareElements();\n    searchTerm = form.elements.searchTerm.value.trim();\n    await loadImages();\n    form.reset(); \n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    loader.classList.remove(\"hidden\");\n    loadMoreButton.classList.add(\"hidden\");\n    page++;\n    await loadImages();\n    const galleryItemHeight = gallery.lastChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: \"smooth\",\n    });\n});\n"],"names":["toastErrorIcon","toastInfoIcon","pixabayApiKey","getPictures","searchTerm","page","perPage","axios","error","createGalleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItem","createGallery","images","imgs","fragment","form","gallery","loader","loadMoreButton","modalLightbox","SimpleLightbox","imagesPerPage","noMatchingResults","iziToast","endSearchResults","loadImages","response","prepareElements","toast","evt","galleryItemHeight"],"mappings":"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"}