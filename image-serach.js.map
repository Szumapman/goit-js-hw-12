{"version":3,"file":"image-serach.js","sources":["../src/img/toast-error.svg","../src/js/get-pixabay-pictures.js","../src/js/create-pixabay-gallery.js","../src/js/image-search.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","\"use strict\"\n\nconst pixabayApiKey = \"47865988-0e202f3c070f6317e288e8f49\"; // should be f.e. in .env file\n\nexport function getPictures(searchTerm) {\n    const searchParams = new URLSearchParams({\n        key: pixabayApiKey,\n        q: searchTerm,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n    });\n\n    return fetch(`https://pixabay.com/api/?${searchParams}`)\n        .then(response => {\n            if (!response.ok) {\n                throw new Error(response.status);\n            }\n            return response.json();\n        }).catch(error => {\n            console.error(error);\n        });\n}","const createGalleryItem = ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n    const galleryItem = document.createElement(\"li\");\n    galleryItem.classList.add(\"gallery-item\");\n    galleryItem.innerHTML = `\n    <a href=\"${largeImageURL}\" class=\"gallery-item-link\">\n        <img class=\"gallery-item-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <ul class=\"info\">\n        <li>\n            <p class=\"info-item-title\">Likes</p>\n            <p class=\"info-item-stats\">${likes}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Views</p>\n            <p class=\"info-item-stats\">${views}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Comments</p>\n            <p class=\"info-item-stats\">${comments}</p>\n        </li>\n        <li>\n            <p class=\"info-item-title\">Downloads</p>\n            <p class=\"info-item-stats\">${downloads}</p>\n        </li>            \n    </ul>\n    `;\n    return galleryItem;\n};\n\nexport const createGallery = (images) => {\n    const imgs = images.map(createGalleryItem);\n\n    const fragment = document.createDocumentFragment();\n    fragment.append(...imgs);\n    return fragment;\n};","\"use strict\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport toastErrorIcon from \"../img/toast-error.svg\";\n\n// to use a different image source, just create new functions getPictures and createGallery and change these two imports\nimport { getPictures } from \"./get-pixabay-pictures\"; \nimport { createGallery } from \"./create-pixabay-gallery\";\n\nconst form = document.querySelector(\".image-search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader-container\");\nconst modalLightbox = new SimpleLightbox(\".gallery-item-link\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,  \n});\n\nform.addEventListener(\"submit\", evt => {\n    evt.preventDefault();\n    loader.classList.remove(\"hidden\");\n    gallery.classList.add(\"hidden\");\n    gallery.innerHTML = \"\";\n    const toast = document.querySelector('.iziToast');\n    if (toast) {\n        iziToast.hide({\n            transitionOut: 'fadeOutUp'\n        }, toast);\n    }\n    const searchTerm = form.elements.searchTerm.value.trim();\n    getPictures(searchTerm).then(response => {\n        if (response.totalHits === 0) {\n            noMatchingResults();\n        } else {\n            gallery.appendChild(createGallery(response.hits));\n            loadImages();\n            modalLightbox.refresh();\n        }\n        form.reset();\n    }).catch(error => console.log(\"Error:\", error));\n});\n\nfunction noMatchingResults() {\n    iziToast.show({\n        iconUrl: toastErrorIcon,\n        message: \"Sorry, there are no images matching<br>your search query. Please try again!\",\n        position: \"topRight\",\n        backgroundColor: \"#EF4040\",\n        messageColor: \"white\",\n        progressBarColor: \"#B51B1B\",\n        theme: \"dark\",\n    });\n    loader.classList.add(\"hidden\");\n}\n\nfunction loadImages() {\n    const images = gallery.querySelectorAll(\".gallery-item-image\");\n    let loadedImagesCount = 0;\n    images.forEach(img => {\n        if (img.complete) {\n            loadedImagesCount++;\n        } else {\n            img.addEventListener(\"load\", () => {\n                loadedImagesCount++;\n                if (loadedImagesCount === images.length) {\n                    loader.classList.add(\"hidden\");\n                    gallery.classList.remove(\"hidden\");\n                }\n            });\n        }\n    });\n}"],"names":["toastErrorIcon","pixabayApiKey","getPictures","searchTerm","searchParams","response","error","createGalleryItem","webformatURL","largeImageURL","tags","likes","views","comments","downloads","galleryItem","createGallery","images","imgs","fragment","form","gallery","loader","modalLightbox","SimpleLightbox","evt","toast","iziToast","noMatchingResults","loadImages","loadedImagesCount","img"],"mappings":"+IAAA,MAAeA,EAAA,u5DCETC,EAAgB,qCAEf,SAASC,EAAYC,EAAY,CACpC,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EAClB,CAAK,EAED,OAAO,MAAM,4BAA4BC,CAAY,EAAE,EAClD,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MAC5B,CAAS,EAAE,MAAMC,GAAS,CACd,QAAQ,MAAMA,CAAK,CAC/B,CAAS,CACT,CCvBA,MAAMC,EAAoB,CAAC,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM,CAClG,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/C,OAAAA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,UAAY;AAAA,eACbN,CAAa;AAAA,+CACmBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,yCAKhCC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,yCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,yCAIRC,CAAS;AAAA;AAAA;AAAA,MAIvCC,CACX,EAEaC,EAAiBC,GAAW,CACrC,MAAMC,EAAOD,EAAO,IAAIV,CAAiB,EAEnCY,EAAW,SAAS,yBAC1B,OAAAA,EAAS,OAAO,GAAGD,CAAI,EAChBC,CACX,ECtBMC,EAAO,SAAS,cAAc,oBAAoB,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,mBAAmB,EACnDC,EAAgB,IAAIC,EAAe,qBAAsB,CAC3D,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAC,EAEDJ,EAAK,iBAAiB,SAAUK,GAAO,CACnCA,EAAI,eAAc,EAClBH,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,UAAU,IAAI,QAAQ,EAC9BA,EAAQ,UAAY,GACpB,MAAMK,EAAQ,SAAS,cAAc,WAAW,EAC5CA,GACAC,EAAS,KAAK,CACV,cAAe,WAClB,EAAED,CAAK,EAEZ,MAAMvB,EAAaiB,EAAK,SAAS,WAAW,MAAM,OAClDlB,EAAYC,CAAU,EAAE,KAAKE,GAAY,CACjCA,EAAS,YAAc,EACvBuB,KAEAP,EAAQ,YAAYL,EAAcX,EAAS,IAAI,CAAC,EAChDwB,IACAN,EAAc,QAAO,GAEzBH,EAAK,MAAK,CAClB,CAAK,EAAE,MAAMd,GAAS,QAAQ,IAAI,SAAUA,CAAK,CAAC,CAClD,CAAC,EAED,SAASsB,GAAoB,CACzBD,EAAS,KAAK,CACV,QAAS3B,EACT,QAAS,8EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,iBAAkB,UAClB,MAAO,MACf,CAAK,EACDsB,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASO,GAAa,CAClB,MAAMZ,EAASI,EAAQ,iBAAiB,qBAAqB,EAC7D,IAAIS,EAAoB,EACxBb,EAAO,QAAQc,GAAO,CACdA,EAAI,SACJD,IAEAC,EAAI,iBAAiB,OAAQ,IAAM,CAC/BD,IACIA,IAAsBb,EAAO,SAC7BK,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAQ,UAAU,OAAO,QAAQ,EAErD,CAAa,CAEb,CAAK,CACL"}