{"version":3,"file":"index.js","sources":["../src/js/image-search.js"],"sourcesContent":["\"use strict\"\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport toastErrorIcon from \"../img/toast-error.svg\";\nimport toastInfoIcon from \"../img/toast-info-bell.svg\";\n\n// to use a different image source, just create new functions getPictures and createGallery and change these two imports\nimport { getPictures } from \"./get-pixabay-pictures\"; \nimport { createGallery } from \"./create-pixabay-gallery\";\n\nconst form = document.querySelector(\".image-search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader-container\");\nconst loadMoreButton = document.querySelector(\".load-more-btn\");\nconst modalLightbox = new SimpleLightbox(\".gallery-item-link\", {\n    captions: true,\n    captionsData: \"alt\",\n    captionDelay: 250,  \n});\n\nlet searchTerm = null;\nlet page = 1;\nlet imagesPerPage = 40;\n\nfunction noMatchingResults() {\n    iziToast.show({\n        iconUrl: toastErrorIcon,\n        message: \"Sorry, there are no images matching<br>your search query. Please try again!\",\n        position: \"topRight\",\n        backgroundColor: \"#EF4040\",\n        messageColor: \"white\",\n        progressBarColor: \"#B51B1B\",\n        theme: \"dark\",\n    });\n    loader.classList.add(\"hidden\");\n}\n\nfunction endSearchResults() {\n    iziToast.show({\n        iconUrl: toastInfoIcon,\n        message: \"We're sorry, but you've reached<br>the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"#0099FF\",\n        messageColor: \"white\",\n        progressBarColor: \"#0071BD\",\n        theme: \"dark\",\n    });\n    loadMoreButton.classList.add(\"hidden\");\n    loader.classList.add(\"hidden\");\n}\n\nasync function loadImages() {\n    try {\n        const response = await getPictures(searchTerm, page, imagesPerPage);\n        if (response.totalHits === 0) {\n            noMatchingResults();\n        } else {\n            gallery.appendChild(createGallery(response.hits));\n            if (response.totalHits > imagesPerPage * page) {\n                loadMoreButton.classList.remove(\"hidden\");\n            } else {\n                endSearchResults();\n            }\n            modalLightbox.refresh();\n            gallery.classList.remove(\"hidden\");\n            loader.classList.add(\"hidden\");\n        }\n    } catch (error) {\n        console.log(\"Error:\", error)\n    }\n}\n\nfunction prepareElements() {\n    loader.classList.remove(\"hidden\");\n    gallery.classList.add(\"hidden\");\n    loadMoreButton.classList.add(\"hidden\");\n    page = 1;\n    gallery.innerHTML = \"\";\n    const toast = document.querySelector('.iziToast');\n    if (toast) {\n        iziToast.hide({\n            transitionOut: 'fadeOutUp'\n        }, toast);\n    }\n}\n\nform.addEventListener(\"submit\", async (evt) => {\n    evt.preventDefault();\n    prepareElements();\n    searchTerm = form.elements.searchTerm.value.trim();\n    await loadImages();\n    form.reset(); \n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    loader.classList.remove(\"hidden\");\n    loadMoreButton.classList.add(\"hidden\");\n    page++;\n    await loadImages();\n    const galleryItemHeight = gallery.lastChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: \"smooth\",\n    });\n});\n"],"names":["form","gallery","loader","loadMoreButton","modalLightbox","SimpleLightbox","searchTerm","page","imagesPerPage","noMatchingResults","iziToast","toastErrorIcon","endSearchResults","toastInfoIcon","loadImages","response","getPictures","createGallery","error","prepareElements","toast","evt","galleryItemHeight"],"mappings":"qHAcA,MAAMA,EAAO,SAAS,cAAc,oBAAoB,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,mBAAmB,EACnDC,EAAiB,SAAS,cAAc,gBAAgB,EACxDC,EAAgB,IAAIC,EAAe,qBAAsB,CAC3D,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAC,EAED,IAAIC,EAAa,KACbC,EAAO,EACPC,EAAgB,GAEpB,SAASC,GAAoB,CACzBC,EAAS,KAAK,CACV,QAASC,EACT,QAAS,8EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,iBAAkB,UAClB,MAAO,MACf,CAAK,EACDT,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASU,GAAmB,CACxBF,EAAS,KAAK,CACV,QAASG,EACT,QAAS,gEACT,SAAU,WACV,gBAAiB,UACjB,aAAc,QACd,iBAAkB,UAClB,MAAO,MACf,CAAK,EACDV,EAAe,UAAU,IAAI,QAAQ,EACrCD,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEA,eAAeY,GAAa,CACxB,GAAI,CACA,MAAMC,EAAW,MAAMC,EAAYV,EAAYC,EAAMC,CAAa,EAC9DO,EAAS,YAAc,EACvBN,KAEAR,EAAQ,YAAYgB,EAAcF,EAAS,IAAI,CAAC,EAC5CA,EAAS,UAAYP,EAAgBD,EACrCJ,EAAe,UAAU,OAAO,QAAQ,EAExCS,IAEJR,EAAc,QAAO,EACrBH,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAO,UAAU,IAAI,QAAQ,EAEpC,OAAQgB,EAAO,CACZ,QAAQ,IAAI,SAAUA,CAAK,CAC9B,CACL,CAEA,SAASC,GAAkB,CACvBjB,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAQ,UAAU,IAAI,QAAQ,EAC9BE,EAAe,UAAU,IAAI,QAAQ,EACrCI,EAAO,EACPN,EAAQ,UAAY,GACpB,MAAMmB,EAAQ,SAAS,cAAc,WAAW,EAC5CA,GACAV,EAAS,KAAK,CACV,cAAe,WAClB,EAAEU,CAAK,CAEhB,CAEApB,EAAK,iBAAiB,SAAU,MAAOqB,GAAQ,CAC3CA,EAAI,eAAc,EAClBF,IACAb,EAAaN,EAAK,SAAS,WAAW,MAAM,KAAI,EAChD,MAAMc,EAAU,EAChBd,EAAK,MAAK,CACd,CAAC,EAEDG,EAAe,iBAAiB,QAAS,SAAY,CACjDD,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAe,UAAU,IAAI,QAAQ,EACrCI,IACA,MAAMO,EAAU,EAChB,MAAMQ,EAAoBrB,EAAQ,UAAU,sBAAqB,EAAG,OACpE,OAAO,SAAS,CACZ,IAAKqB,EAAoB,EACzB,SAAU,QAClB,CAAK,CACL,CAAC"}